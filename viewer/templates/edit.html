% extends "base.html"

% block scripts
<script src="/assets/vendor/vue/js/vue.js"></script>
% endblock

{% block bodyattrs %}vocab="${config.VOCAB_IRI}" id="editor"{% endblock %}

% block content
<!DOCTYPE html>
<meta charset="utf-8" />


<div id="editorApp">
  <h1>Editing: </h1>
  <ul v-for="node in data['@graph']">
    <data-node v-for="(k, v) in node" :key="k" :value="v"></data-node>
  </ul>
</div>

<template id="data-node">
  <li class="data-node">
  <span class="label" v-if="key !== '@graph'">{{key}}</span>
  <span v-if="value['@id']">
    <ul class="linked">
      <data-node v-for="(k, v) in value" :key="k" :value="v"></data-node>
    </ul>
  </span>
  <span v-if="value['@graph']">
    graf:
    <ul>
      <data-node v-for="(k, v) in value" :key="k" :value="v"></data-node>
    </ul>
  </span>
  <span v-if="!value['@id'] && !value['@graph']">
    <span v-if="key === '@id'">
      <a href="{{value}}">{{value}}</a>
    </span>
    <span v-if="isArray(value)">
      <ul>
        <data-node v-for="v in value" :value="v"></data-node>
      </ul>
    </span>
    <span v-if="isPlainObject(value)">
      <ul>
        <li v-for="v in value">
          <code>{{ v | json }}</code>
        </li>
      </ul>
    </span>
    <span v-if="!isArray(value) && !isPlainObject(value) && key !== '@id'">
      <input type="text" value="{{value}}" size="70"></input>
    </span>
  </span>
  </li>
</template>

<script id="data" type="application/json">${data|safe}</script>
<script id="model" type="application/json">${model|safe}</script>
% endblock
