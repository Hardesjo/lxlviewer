% extends "thing.html"

{% block title %} - ${ui.SEARCH_RESULTS.label}{% endblock %}

% macro search_controls(details)
  <div class="col-md-12 panel panel-default search-controls">
    % if details
    <div class="search-details">
      <span class="search-keyword">
          
        % if thing.query
          Sökning på: <i>"${thing.query}"</i>
          % if thing.totalItems
            gav ${thing.totalItems} träffar.
          % endif
        % elif thing.value
          Sökning: ${thing.value}
        % endif
      </span>
      <span class="search-items-per-page pull-right">
        % if thing.totalItems
        Visar resultat
          ${thing.itemOffset + 1}-${min(thing.totalItems, thing.itemOffset + len(thing['items']))}.
        % endif
      </span>
    </div>
    % endif
    
    <div class="search-buttons">
      % if thing.first and thing.previous
      <a class="btn btn-primary pagination-firstpage" href="${thing.first[ID]}">Första</a>
      % else
      <a class="btn btn-primary pagination-firstpage" disabled>Första</a>
      % endif
      % if thing.previous
      <a class="btn btn-primary pagination-back" href="${thing.previous[ID]}">Föregående</a>
      % else
      <a class="btn btn-primary pagination-back" disabled>Föregående</a>
      % endif
      % if thing.next
      <a class="btn btn-primary pagination-next" href="${thing.next[ID]}">Nästa</a>
      % else
      <a class="btn btn-primary pagination-next" disabled>Nästa</a>
      % endif
    </div>
    <!-- ${viewthing(thing, element='article', classes='')} -->
  </div>
% endmacro

% block content
  % set items = thing['items']
  <div class="alert alert-warning"><i class="fa fa-exclamation-circle"></i> Observera att den nuvarande sökfunktionen saknar relevanssortering.</div>
  <h1>${self.title()}</h1>
  
  ${ search_controls(True) }
  % if items
    % for item in items
    <!-- <ul class="panel panel-default"> -->
        ${viewthing(item, classes='col-md-12 panel panel-default hit-item', rel='items')}
    <!-- </ul> -->
    % endfor
  % else
    <div class="col-md-12 panel panel-default">
      <div class="panel-body no-results">
        Din sökning gav inget resultat...
      </div>
    </div>
  % endif
  ${ search_controls(False) }
% endblock
