% extends "thing.html"
% import 'search.html' as search

{% block bodyattrs %}vocab="${config.VOCAB_IRI}" id="pagedcollection"{% endblock %}
{% block title %}${ui.SEARCH_RESULTS.label}{% endblock %}

% block content
% set items = thing['items']

<div id="PagedCollectionApp">
  <div class="row">
    <div v-if="(status.resultList.loading || status.resultList.error) && !formDataSupported" class="loadingText panel panel-default">
      <h1 v-if="!status.resultList.error"><i class="fa fa-circle-o-notch fa-spin"></i></h1>
      <span v-if="!status.resultList.error" class="status">HÃ¤mtar resultat</span>
    </div>
    <div class="col-md-3">
      <facet-controls v-if="initialized == true" :result="result"></facet-controls>
      <landing-box v-if="initialized == true && typeof result.totalItems === 'undefined'" :title="result.title" :text="result.summary.articleBody"></landing-box>
    </div>
    <div class="col-md-9" v-if="status.searchType === 'libris'">
      <div class="search-type-button-container" v-if="initialized == true">
        <div class="search-type-button active">Libris</div>
        <div class="search-type-button" v-on:click="switchSearchType">Remote</div>
      </div>
      <search-form v-if="initialized == true" :result="result" :form-data-supported="formDataSupported" site-title="${g.site.title}" filter-param="${g.site.filter_param}" :use-submit="false"></search-form>

      <search-result-component :result="result" :form-data-supported="formDataSupported" v-if="(initialized == true && result.totalItems > -1) || status.resultList.loading"></search-result-component>
      <dataset-observations
      v-if="initialized == true && !result.totalItems && '${g.site.title}' === 'id.kb.se'"
      :statistics="result.statistics"
      :stats-index="${g.site.statsindex}"
      site-title="${g.site.title}"
      ></dataset-observations>
    </div>
    <div class="col-md-9" v-if="status.searchType === 'remote'">
      <div class="search-type-button-container" v-if="initialized == true">
        <div class="search-type-button" v-on:click="switchSearchType">Libris</div>
        <div class="search-type-button active">Remote</div>
      </div>

      <remote-search></remote-search>
    </div>
  </div>
</div>
<script id="data" type="application/json">${thing|tojson|safe}</script>
% endblock
