% extends "base.html"

% macro viewscheme(scheme)
  % if scheme.object is not none and 'titleByLang' in scheme.object and 'descriptionByLang' in scheme.object
  <div class="col-md-4">
  <div id="${scheme.object.notation[0].replace('/','-')}" class="panel panel-default scheme-item">
    <header class="panel-heading">
      <h1 class="panel-title">
        <a href="${ scheme.view['@id'] }">
          ${scheme.object.titleByLang[lang]}
        </a>
      </h1>
    </header>
    <div class="panel-body container-fluid">
        <p class="description collapsed">
          ${ scheme.object.descriptionByLang[lang].strip().replace('\n','<br/>') | safe }
        </p>
        % if scheme.sliceByDimension
        <ul>
          % for item in scheme.sliceByDimension['inCollection.@id'].observation
            <a class="list-group-item"
                href="${item.view['@id']}">
                ${item.object.titleByLang[lang]}
                <span class="badge">${format_number(item.totalItems)} st.</span>
            </a>
          % endfor
        % for subkey in ['@type', 'inCollection.@id']
          % if scheme.sliceByDimension and scheme.sliceByDimension[subkey]
            % if scheme.sliceByDimension[subkey].observation
              <h4>Uppdelning: ${subkey}</h4>
            % endif
              % for observation in scheme.sliceByDimension[subkey].observation
                <a class="list-group-item"
                  href="${observation.view[ID]}">
                    % if observation.object
                      ${observation.object.label or observation.object.titleByLang.sv}
                    % else
                      ${observation.view[ID]}
                    % endif
                    <span class="badge">${format_number(observation.totalItems)} st.</span>
                </a>
              % endfor
            % endif
          % endfor
        </ul>
        % endif
  </div>
</div>
</div>
  % endif
% endmacro

{% block title %}{% endblock %}

{% block bodyattrs %}id="website"{% endblock %}

% block jumbotron
<div class="jumbotron">
  <div class="container">
    <div class="col-md-12">
      <div class="intro-text">
      % if g.current_base == IDKBSE
        <p>
          <b>id.kb.se</b>
          är en tjänst som tillgängliggör de grundstenar Kungl.
          biblioteket använder för att publicera strukturerad,
          <a href="https://sv.wikipedia.org/wiki/L%C3%A4nkad_data">länkad data</a>.
          Här finns en samling gemensamma definitioner och begrepp som hjälper
          till att samordna beskrivningar av vårt material. I grunden finns bl.a.
          ett basvokabulär med gemensamma egenskaper och typer. I möjligaste mån
          länkar alla definitioner till internationella, välkända motsvarigheter.
        </p>
        <p>
          Här tillgängliggörs bl.a. Svenska ämnesord, barnämnesord och
          genre/formtermer, vilka utgör viktiga byggstenar för denna samordning.
        </p>
      % else
        <p>Data på <b>libris.kb.se</b>.</p>
      % endif
      </div>
    </div>
  </div>
</div>
% endblock

{% block navcontainerclass %} container {% endblock %}

% block content
<div class="row">

  % if g.current_base == IDKBSE  
  <div class="col-md-12">
    <div class="panel panel-default scheme-item">
      <ul class="col-md-12 main-nav">
      % for scheme in thing.statistics.sliceByDimension['inScheme.@id'].observation
        % if scheme.object is not none and 'titleByLang' in scheme.object and 'descriptionByLang' in scheme.object
        <a class="list-group-item"
          href="#${scheme.object.notation[0].replace('/','-')}">
          ${scheme.object.titleByLang[lang]}
        </a>
        % endif
      % endfor
      </ul>
    </div>
  </div>
  
    % for scheme in thing.statistics.sliceByDimension['inScheme.@id'].observation
      ${viewscheme(scheme)}
    % endfor
  
  % elif g.current_base == LIBRIS
  
  <!-- <div class="col-md-4">
    <div class="panel panel-default scheme-item">
      <ul class="main-nav">
      % for scheme in thing.statistics.sliceByDimension['inScheme.@id'].observation
        % if scheme.object is not none and 'titleByLang' in scheme.object and 'descriptionByLang' in scheme.object
        <a class="list-group-item"
          href="#${scheme.object.notation[0].replace('/','-')}">
          ${scheme.object.titleByLang[lang]}
        </a>
        % endif
      % endfor
      </ul>
    </div>
  </div> -->
  
    % for scheme in thing.statistics.sliceByDimension['inScheme.@id'].observation
      ${viewscheme(scheme)}
    % endfor
  
  % endif
  
</div>

% endblock

% block footer

    <div class="footer-container">
      <div class="container">
          <div class="col-md-3 col-md-offset-3 col-md-push-2">
            <h1>Kontakt</h1>
            <ul class="list-unstyled">
              <li class=""><a href="mailto:libris@kb.se?Subject=id.kb.se"><i class="fa fa-fw fa-envelope"></i> libris@kb.se</a></li>
            </ul>
          </div>
          <div class="col-md-3 col-md-push-2">
            <h1>Resurser</h1>
            <ul class="list-unstyled">
              <li class=""><a href="${url_for('marcframeview.marcframeview')}"><i class="fa fa-fw fa-exchange"></i> Marc-mappningar</a></li>
              <li class=""><a href="${url_for('thingview.vocabview')}"><i class="fa fa-fw fa-book"></i> Basvokabulär</a></li>
            </ul>
          </div>
          <div class="text-center col-md-3 col-md-pull-8">
            <div class="">
              <img src="/assets/kb_logo_black.svg" class="logo-medium" alt="" />
            </div>
            <div class="text-black">
              <p><br/>
                <strong><a href="http://www.kb.se" alt="Länk till Kungl. bibliotekets webbplats">
                  KUNGL. BIBLIOTEKET
                </a></strong>
              </p>
            </div>
          </div>
      </div>
    </div>

% endblock


% block scripts
    <script src="/js/website.js"></script>
% endblock
